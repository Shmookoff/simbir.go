# Требования

python_version >= "3.11" and python_version < "4.0"

# Запуск

1. `pip install -r requirements.txt`
2. `cp .env.example .env`, поменять переменные окружения в файле `.env`
3. `alembic upgrade head`
4. `uvicorn volga_it.app:app`

Приложение будет доступно по адресу http://127.0.0.1:8000
Swagger будет доступен по адресу http://127.0.0.1:8000/docs

# Отличия от задания

В задании не описываются конкретные требования к бизнес логике. Я старался не придумывать задание, но приложение бы было неработоспособным без нижеперечисленной логики.

## Аутентификация

Токены живут такое количество секунд, какое указано в переменной окружения `JWT_ACCESS_TTL_SECONDS`. По истечении данного времени, токен становится недействительным.

Токен становится недействительным после выхода из аккаунта (POST /api/Account/SignOut)

## RentController

### POST /api/Rent/New/{transportId}

#### Нельзя начать аренду, если арендуемый транспорт уже арендован

#### Нельзя начать аренду, если баланс арендатора < 0

#### Нельзя начать аренду, если цена запрашиваемого типа аренды для транспорта неопределена

#### При начале аренды, транспорт больше нельзя арендовать

### POST /api/Rent/End/{rentId}

#### Нельзя закончить аренду, если аренда уже была закончена

#### При окончании аренды, транспорт снова можно арендовать

#### При окончании аренды, положение транспорта ставится на переданное положение в запросе

#### При окончании аренды, баланс арендатора уменьшается на окончательную стоимость аренды

## Admin Controllers

За целостность данных отвечает администратор. Приложение не пытается проверять данные. Данные ограничены типами схем и уникальными ограничениями, ограничениями внешних ключей со стороны базы данных.